/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/message/[id]/route";
exports.ids = ["app/api/message/[id]/route"];
exports.modules = {

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fmessage%2F%5Bid%5D%2Froute&page=%2Fapi%2Fmessage%2F%5Bid%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmessage%2F%5Bid%5D%2Froute.ts&appDir=C%3A%5CUsers%5Ccigri%5COneDrive%5C%D0%A0%D0%B0%D0%B1%D0%BE%D1%87%D0%B8%D0%B9%20%D1%81%D1%82%D0%BE%D0%BB%5CProjects%5Cchat-web-site%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Ccigri%5COneDrive%5C%D0%A0%D0%B0%D0%B1%D0%BE%D1%87%D0%B8%D0%B9%20%D1%81%D1%82%D0%BE%D0%BB%5CProjects%5Cchat-web-site&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fmessage%2F%5Bid%5D%2Froute&page=%2Fapi%2Fmessage%2F%5Bid%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmessage%2F%5Bid%5D%2Froute.ts&appDir=C%3A%5CUsers%5Ccigri%5COneDrive%5C%D0%A0%D0%B0%D0%B1%D0%BE%D1%87%D0%B8%D0%B9%20%D1%81%D1%82%D0%BE%D0%BB%5CProjects%5Cchat-web-site%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Ccigri%5COneDrive%5C%D0%A0%D0%B0%D0%B1%D0%BE%D1%87%D0%B8%D0%B9%20%D1%81%D1%82%D0%BE%D0%BB%5CProjects%5Cchat-web-site&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_cigri_OneDrive_Projects_chat_web_site_src_app_api_message_id_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/message/[id]/route.ts */ \"(rsc)/./src/app/api/message/[id]/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/message/[id]/route\",\n        pathname: \"/api/message/[id]\",\n        filename: \"route\",\n        bundlePath: \"app/api/message/[id]/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\cigri\\\\OneDrive\\\\Рабочий стол\\\\Projects\\\\chat-web-site\\\\src\\\\app\\\\api\\\\message\\\\[id]\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_cigri_OneDrive_Projects_chat_web_site_src_app_api_message_id_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZtZXNzYWdlJTJGJTVCaWQlNUQlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRm1lc3NhZ2UlMkYlNUJpZCU1RCUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRm1lc3NhZ2UlMkYlNUJpZCU1RCUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNjaWdyaSU1Q09uZURyaXZlJTVDJUQwJUEwJUQwJUIwJUQwJUIxJUQwJUJFJUQxJTg3JUQwJUI4JUQwJUI5JTIwJUQxJTgxJUQxJTgyJUQwJUJFJUQwJUJCJTVDUHJvamVjdHMlNUNjaGF0LXdlYi1zaXRlJTVDc3JjJTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1DJTNBJTVDVXNlcnMlNUNjaWdyaSU1Q09uZURyaXZlJTVDJUQwJUEwJUQwJUIwJUQwJUIxJUQwJUJFJUQxJTg3JUQwJUI4JUQwJUI5JTIwJUQxJTgxJUQxJTgyJUQwJUJFJUQwJUJCJTVDUHJvamVjdHMlNUNjaGF0LXdlYi1zaXRlJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUErRjtBQUN2QztBQUNxQjtBQUN5RDtBQUN0STtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IseUdBQW1CO0FBQzNDO0FBQ0EsY0FBYyxrRUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHNEQUFzRDtBQUM5RDtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUMwRjs7QUFFMUYiLCJzb3VyY2VzIjpbIiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiQzpcXFxcVXNlcnNcXFxcY2lncmlcXFxcT25lRHJpdmVcXFxc0KDQsNCx0L7Rh9C40Lkg0YHRgtC+0LtcXFxcUHJvamVjdHNcXFxcY2hhdC13ZWItc2l0ZVxcXFxzcmNcXFxcYXBwXFxcXGFwaVxcXFxtZXNzYWdlXFxcXFtpZF1cXFxccm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL21lc3NhZ2UvW2lkXS9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL21lc3NhZ2UvW2lkXVwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvbWVzc2FnZS9baWRdL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiQzpcXFxcVXNlcnNcXFxcY2lncmlcXFxcT25lRHJpdmVcXFxc0KDQsNCx0L7Rh9C40Lkg0YHRgtC+0LtcXFxcUHJvamVjdHNcXFxcY2hhdC13ZWItc2l0ZVxcXFxzcmNcXFxcYXBwXFxcXGFwaVxcXFxtZXNzYWdlXFxcXFtpZF1cXFxccm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyB3b3JrQXN5bmNTdG9yYWdlLCB3b3JrVW5pdEFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICB3b3JrQXN5bmNTdG9yYWdlLFxuICAgICAgICB3b3JrVW5pdEFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fmessage%2F%5Bid%5D%2Froute&page=%2Fapi%2Fmessage%2F%5Bid%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmessage%2F%5Bid%5D%2Froute.ts&appDir=C%3A%5CUsers%5Ccigri%5COneDrive%5C%D0%A0%D0%B0%D0%B1%D0%BE%D1%87%D0%B8%D0%B9%20%D1%81%D1%82%D0%BE%D0%BB%5CProjects%5Cchat-web-site%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Ccigri%5COneDrive%5C%D0%A0%D0%B0%D0%B1%D0%BE%D1%87%D0%B8%D0%B9%20%D1%81%D1%82%D0%BE%D0%BB%5CProjects%5Cchat-web-site&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/./src/app/api/message/[id]/route.ts":
/*!*******************************************!*\
  !*** ./src/app/api/message/[id]/route.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DELETE: () => (/* binding */ DELETE),\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var _models_Message__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/models/Message */ \"(rsc)/./src/models/Message.ts\");\n/* harmony import */ var _models_Chat__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/models/Chat */ \"(rsc)/./src/models/Chat.ts\");\n/* harmony import */ var _db_mongodb__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/db/mongodb */ \"(rsc)/./src/db/mongodb.ts\");\n/* harmony import */ var _middleware_api_middleware__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/middleware/api/middleware */ \"(rsc)/./src/middleware/api/middleware.ts\");\n\n\n\n\nasync function GET(request, { params }) {\n    try {\n        const user = await (0,_middleware_api_middleware__WEBPACK_IMPORTED_MODULE_3__.verifyUser)(request);\n        await (0,_db_mongodb__WEBPACK_IMPORTED_MODULE_2__.connectToMongoDB)();\n        const { id } = await params;\n        if (!id) {\n            return (0,_middleware_api_middleware__WEBPACK_IMPORTED_MODULE_3__.createResponse)({\n                error: 'chatId is required'\n            }, _middleware_api_middleware__WEBPACK_IMPORTED_MODULE_3__.STATUS_CODES.BAD_REQUEST);\n        }\n        // Проверяем, является ли пользователь участником чата\n        const chat = await _models_Chat__WEBPACK_IMPORTED_MODULE_1__[\"default\"].findById(id);\n        if (!chat || !chat.participants.includes(user.id)) {\n            return (0,_middleware_api_middleware__WEBPACK_IMPORTED_MODULE_3__.createResponse)({\n                error: 'You are not authorized to view messages in this chat'\n            }, _middleware_api_middleware__WEBPACK_IMPORTED_MODULE_3__.STATUS_CODES.FORBIDDEN);\n        }\n        const messages = await _models_Message__WEBPACK_IMPORTED_MODULE_0__[\"default\"].find({\n            chat: id\n        });\n        return (0,_middleware_api_middleware__WEBPACK_IMPORTED_MODULE_3__.createResponse)(messages, _middleware_api_middleware__WEBPACK_IMPORTED_MODULE_3__.STATUS_CODES.OK);\n    } catch (error) {\n        return (0,_middleware_api_middleware__WEBPACK_IMPORTED_MODULE_3__.handleError)(error);\n    }\n}\nasync function DELETE(request, { params }) {\n    try {\n        const user = await (0,_middleware_api_middleware__WEBPACK_IMPORTED_MODULE_3__.verifyUser)(request);\n        await (0,_db_mongodb__WEBPACK_IMPORTED_MODULE_2__.connectToMongoDB)();\n        const { id } = await params;\n        const message = await _models_Message__WEBPACK_IMPORTED_MODULE_0__[\"default\"].findById(id);\n        if (!message) {\n            return (0,_middleware_api_middleware__WEBPACK_IMPORTED_MODULE_3__.createResponse)({\n                error: 'Message not found'\n            }, _middleware_api_middleware__WEBPACK_IMPORTED_MODULE_3__.STATUS_CODES.NOT_FOUND);\n        }\n        // Проверяем, является ли пользователь участником чата\n        const chat = await _models_Chat__WEBPACK_IMPORTED_MODULE_1__[\"default\"].findById(message.chat);\n        if (!chat || !chat.participants.includes(user.id)) {\n            return (0,_middleware_api_middleware__WEBPACK_IMPORTED_MODULE_3__.createResponse)({\n                error: 'You are not authorized to delete messages in this chat'\n            }, _middleware_api_middleware__WEBPACK_IMPORTED_MODULE_3__.STATUS_CODES.FORBIDDEN);\n        }\n        if (message.sender.toString() !== user.id) {\n            return (0,_middleware_api_middleware__WEBPACK_IMPORTED_MODULE_3__.createResponse)({\n                error: 'You are not authorized to delete this message'\n            }, _middleware_api_middleware__WEBPACK_IMPORTED_MODULE_3__.STATUS_CODES.FORBIDDEN);\n        }\n        await _models_Message__WEBPACK_IMPORTED_MODULE_0__[\"default\"].findByIdAndDelete(id);\n        return (0,_middleware_api_middleware__WEBPACK_IMPORTED_MODULE_3__.createResponse)('Message deleted successfully', _middleware_api_middleware__WEBPACK_IMPORTED_MODULE_3__.STATUS_CODES.OK);\n    } catch (error) {\n        return (0,_middleware_api_middleware__WEBPACK_IMPORTED_MODULE_3__.handleError)(error);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9tZXNzYWdlL1tpZF0vcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQXVDO0FBQ047QUFDZTtBQU1YO0FBRTlCLGVBQWVPLElBQ3BCQyxPQUFnQixFQUNoQixFQUFFQyxNQUFNLEVBQXVDO0lBRS9DLElBQUk7UUFDRixNQUFNQyxPQUFPLE1BQU1KLHNFQUFVQSxDQUFDRTtRQUM5QixNQUFNTiw2REFBZ0JBO1FBRXRCLE1BQU0sRUFBRVMsRUFBRSxFQUFFLEdBQUcsTUFBTUY7UUFFckIsSUFBSSxDQUFDRSxJQUFJO1lBQ1AsT0FBT1AsMEVBQWNBLENBQ25CO2dCQUFFUSxPQUFPO1lBQXFCLEdBQzlCUCxvRUFBWUEsQ0FBQ1EsV0FBVztRQUU1QjtRQUVBLHNEQUFzRDtRQUN0RCxNQUFNQyxPQUFPLE1BQU1iLG9EQUFJQSxDQUFDYyxRQUFRLENBQUNKO1FBQ2pDLElBQUksQ0FBQ0csUUFBUSxDQUFDQSxLQUFLRSxZQUFZLENBQUNDLFFBQVEsQ0FBQ1AsS0FBS0MsRUFBRSxHQUFHO1lBQ2pELE9BQU9QLDBFQUFjQSxDQUNuQjtnQkFBRVEsT0FBTztZQUF1RCxHQUNoRVAsb0VBQVlBLENBQUNhLFNBQVM7UUFFMUI7UUFFQSxNQUFNQyxXQUFXLE1BQU1uQix1REFBT0EsQ0FBQ29CLElBQUksQ0FBQztZQUFFTixNQUFNSDtRQUFHO1FBRS9DLE9BQU9QLDBFQUFjQSxDQUFDZSxVQUFVZCxvRUFBWUEsQ0FBQ2dCLEVBQUU7SUFDakQsRUFBRSxPQUFPVCxPQUFPO1FBQ2QsT0FBT1QsdUVBQVdBLENBQUNTO0lBQ3JCO0FBQ0Y7QUFFTyxlQUFlVSxPQUNwQmQsT0FBZ0IsRUFDaEIsRUFBRUMsTUFBTSxFQUF1QztJQUUvQyxJQUFJO1FBQ0YsTUFBTUMsT0FBTyxNQUFNSixzRUFBVUEsQ0FBQ0U7UUFDOUIsTUFBTU4sNkRBQWdCQTtRQUV0QixNQUFNLEVBQUVTLEVBQUUsRUFBRSxHQUFHLE1BQU1GO1FBRXJCLE1BQU1jLFVBQVUsTUFBTXZCLHVEQUFPQSxDQUFDZSxRQUFRLENBQUNKO1FBRXZDLElBQUksQ0FBQ1ksU0FBUztZQUNaLE9BQU9uQiwwRUFBY0EsQ0FDbkI7Z0JBQUVRLE9BQU87WUFBb0IsR0FDN0JQLG9FQUFZQSxDQUFDbUIsU0FBUztRQUUxQjtRQUVBLHNEQUFzRDtRQUN0RCxNQUFNVixPQUFPLE1BQU1iLG9EQUFJQSxDQUFDYyxRQUFRLENBQUNRLFFBQVFULElBQUk7UUFDN0MsSUFBSSxDQUFDQSxRQUFRLENBQUNBLEtBQUtFLFlBQVksQ0FBQ0MsUUFBUSxDQUFDUCxLQUFLQyxFQUFFLEdBQUc7WUFDakQsT0FBT1AsMEVBQWNBLENBQ25CO2dCQUFFUSxPQUFPO1lBQXlELEdBQ2xFUCxvRUFBWUEsQ0FBQ2EsU0FBUztRQUUxQjtRQUVBLElBQUlLLFFBQVFFLE1BQU0sQ0FBQ0MsUUFBUSxPQUFPaEIsS0FBS0MsRUFBRSxFQUFFO1lBQ3pDLE9BQU9QLDBFQUFjQSxDQUNuQjtnQkFBRVEsT0FBTztZQUFnRCxHQUN6RFAsb0VBQVlBLENBQUNhLFNBQVM7UUFFMUI7UUFFQSxNQUFNbEIsdURBQU9BLENBQUMyQixpQkFBaUIsQ0FBQ2hCO1FBRWhDLE9BQU9QLDBFQUFjQSxDQUFDLGdDQUFnQ0Msb0VBQVlBLENBQUNnQixFQUFFO0lBQ3ZFLEVBQUUsT0FBT1QsT0FBTztRQUNkLE9BQU9ULHVFQUFXQSxDQUFDUztJQUNyQjtBQUNGIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGNpZ3JpXFxPbmVEcml2ZVxc0KDQsNCx0L7Rh9C40Lkg0YHRgtC+0LtcXFByb2plY3RzXFxjaGF0LXdlYi1zaXRlXFxzcmNcXGFwcFxcYXBpXFxtZXNzYWdlXFxbaWRdXFxyb3V0ZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgTWVzc2FnZSBmcm9tICdAL21vZGVscy9NZXNzYWdlJztcclxuaW1wb3J0IENoYXQgZnJvbSAnQC9tb2RlbHMvQ2hhdCc7XHJcbmltcG9ydCB7IGNvbm5lY3RUb01vbmdvREIgfSBmcm9tICdAL2RiL21vbmdvZGInO1xyXG5pbXBvcnQge1xyXG4gIGhhbmRsZUVycm9yLFxyXG4gIGNyZWF0ZVJlc3BvbnNlLFxyXG4gIFNUQVRVU19DT0RFUyxcclxuICB2ZXJpZnlVc2VyLFxyXG59IGZyb20gJ0AvbWlkZGxld2FyZS9hcGkvbWlkZGxld2FyZSc7XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKFxyXG4gIHJlcXVlc3Q6IFJlcXVlc3QsXHJcbiAgeyBwYXJhbXMgfTogeyBwYXJhbXM6IFByb21pc2U8eyBpZDogc3RyaW5nIH0+IH1cclxuKSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCB2ZXJpZnlVc2VyKHJlcXVlc3QpO1xyXG4gICAgYXdhaXQgY29ubmVjdFRvTW9uZ29EQigpO1xyXG5cclxuICAgIGNvbnN0IHsgaWQgfSA9IGF3YWl0IHBhcmFtcztcclxuXHJcbiAgICBpZiAoIWlkKSB7XHJcbiAgICAgIHJldHVybiBjcmVhdGVSZXNwb25zZShcclxuICAgICAgICB7IGVycm9yOiAnY2hhdElkIGlzIHJlcXVpcmVkJyB9LFxyXG4gICAgICAgIFNUQVRVU19DT0RFUy5CQURfUkVRVUVTVFxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vINCf0YDQvtCy0LXRgNGP0LXQvCwg0Y/QstC70Y/QtdGC0YHRjyDQu9C4INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjCDRg9GH0LDRgdGC0L3QuNC60L7QvCDRh9Cw0YLQsFxyXG4gICAgY29uc3QgY2hhdCA9IGF3YWl0IENoYXQuZmluZEJ5SWQoaWQpO1xyXG4gICAgaWYgKCFjaGF0IHx8ICFjaGF0LnBhcnRpY2lwYW50cy5pbmNsdWRlcyh1c2VyLmlkKSkge1xyXG4gICAgICByZXR1cm4gY3JlYXRlUmVzcG9uc2UoXHJcbiAgICAgICAgeyBlcnJvcjogJ1lvdSBhcmUgbm90IGF1dGhvcml6ZWQgdG8gdmlldyBtZXNzYWdlcyBpbiB0aGlzIGNoYXQnIH0sXHJcbiAgICAgICAgU1RBVFVTX0NPREVTLkZPUkJJRERFTlxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IG1lc3NhZ2VzID0gYXdhaXQgTWVzc2FnZS5maW5kKHsgY2hhdDogaWQgfSk7XHJcblxyXG4gICAgcmV0dXJuIGNyZWF0ZVJlc3BvbnNlKG1lc3NhZ2VzLCBTVEFUVVNfQ09ERVMuT0spO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICByZXR1cm4gaGFuZGxlRXJyb3IoZXJyb3IpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIERFTEVURShcclxuICByZXF1ZXN0OiBSZXF1ZXN0LFxyXG4gIHsgcGFyYW1zIH06IHsgcGFyYW1zOiBQcm9taXNlPHsgaWQ6IHN0cmluZyB9PiB9XHJcbikge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgdmVyaWZ5VXNlcihyZXF1ZXN0KTtcclxuICAgIGF3YWl0IGNvbm5lY3RUb01vbmdvREIoKTtcclxuXHJcbiAgICBjb25zdCB7IGlkIH0gPSBhd2FpdCBwYXJhbXM7XHJcblxyXG4gICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IE1lc3NhZ2UuZmluZEJ5SWQoaWQpO1xyXG5cclxuICAgIGlmICghbWVzc2FnZSkge1xyXG4gICAgICByZXR1cm4gY3JlYXRlUmVzcG9uc2UoXHJcbiAgICAgICAgeyBlcnJvcjogJ01lc3NhZ2Ugbm90IGZvdW5kJyB9LFxyXG4gICAgICAgIFNUQVRVU19DT0RFUy5OT1RfRk9VTkRcclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDQn9GA0L7QstC10YDRj9C10LwsINGP0LLQu9GP0LXRgtGB0Y8g0LvQuCDQv9C+0LvRjNC30L7QstCw0YLQtdC70Ywg0YPRh9Cw0YHRgtC90LjQutC+0Lwg0YfQsNGC0LBcclxuICAgIGNvbnN0IGNoYXQgPSBhd2FpdCBDaGF0LmZpbmRCeUlkKG1lc3NhZ2UuY2hhdCk7XHJcbiAgICBpZiAoIWNoYXQgfHwgIWNoYXQucGFydGljaXBhbnRzLmluY2x1ZGVzKHVzZXIuaWQpKSB7XHJcbiAgICAgIHJldHVybiBjcmVhdGVSZXNwb25zZShcclxuICAgICAgICB7IGVycm9yOiAnWW91IGFyZSBub3QgYXV0aG9yaXplZCB0byBkZWxldGUgbWVzc2FnZXMgaW4gdGhpcyBjaGF0JyB9LFxyXG4gICAgICAgIFNUQVRVU19DT0RFUy5GT1JCSURERU5cclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAobWVzc2FnZS5zZW5kZXIudG9TdHJpbmcoKSAhPT0gdXNlci5pZCkge1xyXG4gICAgICByZXR1cm4gY3JlYXRlUmVzcG9uc2UoXHJcbiAgICAgICAgeyBlcnJvcjogJ1lvdSBhcmUgbm90IGF1dGhvcml6ZWQgdG8gZGVsZXRlIHRoaXMgbWVzc2FnZScgfSxcclxuICAgICAgICBTVEFUVVNfQ09ERVMuRk9SQklEREVOXHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgYXdhaXQgTWVzc2FnZS5maW5kQnlJZEFuZERlbGV0ZShpZCk7XHJcblxyXG4gICAgcmV0dXJuIGNyZWF0ZVJlc3BvbnNlKCdNZXNzYWdlIGRlbGV0ZWQgc3VjY2Vzc2Z1bGx5JywgU1RBVFVTX0NPREVTLk9LKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgcmV0dXJuIGhhbmRsZUVycm9yKGVycm9yKTtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIk1lc3NhZ2UiLCJDaGF0IiwiY29ubmVjdFRvTW9uZ29EQiIsImhhbmRsZUVycm9yIiwiY3JlYXRlUmVzcG9uc2UiLCJTVEFUVVNfQ09ERVMiLCJ2ZXJpZnlVc2VyIiwiR0VUIiwicmVxdWVzdCIsInBhcmFtcyIsInVzZXIiLCJpZCIsImVycm9yIiwiQkFEX1JFUVVFU1QiLCJjaGF0IiwiZmluZEJ5SWQiLCJwYXJ0aWNpcGFudHMiLCJpbmNsdWRlcyIsIkZPUkJJRERFTiIsIm1lc3NhZ2VzIiwiZmluZCIsIk9LIiwiREVMRVRFIiwibWVzc2FnZSIsIk5PVF9GT1VORCIsInNlbmRlciIsInRvU3RyaW5nIiwiZmluZEJ5SWRBbmREZWxldGUiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/message/[id]/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/db/mongodb.ts":
/*!***************************!*\
  !*** ./src/db/mongodb.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   connectToMongoDB: () => (/* binding */ connectToMongoDB),\n/* harmony export */   mongoConnection: () => (/* binding */ mongoConnection)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nlet isConnected = false;\nconst connectToMongoDB = async ()=>{\n    console.log('Connecting to mongoDB...');\n    if (isConnected) {\n        console.log('Already connected to mongoDB');\n        return;\n    }\n    const MONGODB_URI = process.env.MONGODB_URI;\n    if (!MONGODB_URI) {\n        throw new Error('MONGODB_URI is not defined in .env.local file or environment variables');\n    }\n    try {\n        await mongoose__WEBPACK_IMPORTED_MODULE_0___default().connect(MONGODB_URI);\n        isConnected = true;\n        console.log('Connected to mongoDB');\n    } catch (error) {\n        console.error('Failed to connect to mongoDB', error);\n        throw error;\n    }\n};\nconst mongoConnection = (mongoose__WEBPACK_IMPORTED_MODULE_0___default().connection);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvZGIvbW9uZ29kYi50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQWdDO0FBRWhDLElBQUlDLGNBQWM7QUFFWCxNQUFNQyxtQkFBbUI7SUFDOUJDLFFBQVFDLEdBQUcsQ0FBQztJQUVaLElBQUlILGFBQWE7UUFDZkUsUUFBUUMsR0FBRyxDQUFDO1FBQ1o7SUFDRjtJQUVBLE1BQU1DLGNBQWNDLFFBQVFDLEdBQUcsQ0FBQ0YsV0FBVztJQUUzQyxJQUFJLENBQUNBLGFBQWE7UUFDaEIsTUFBTSxJQUFJRyxNQUNSO0lBRUo7SUFFQSxJQUFJO1FBQ0YsTUFBTVIsdURBQWdCLENBQUNLO1FBQ3ZCSixjQUFjO1FBQ2RFLFFBQVFDLEdBQUcsQ0FBQztJQUNkLEVBQUUsT0FBT00sT0FBTztRQUNkUCxRQUFRTyxLQUFLLENBQUMsZ0NBQWdDQTtRQUM5QyxNQUFNQTtJQUNSO0FBQ0YsRUFBRTtBQUVLLE1BQU1DLGtCQUFrQlgsNERBQW1CLENBQUMiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcY2lncmlcXE9uZURyaXZlXFzQoNCw0LHQvtGH0LjQuSDRgdGC0L7Qu1xcUHJvamVjdHNcXGNoYXQtd2ViLXNpdGVcXHNyY1xcZGJcXG1vbmdvZGIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJztcblxubGV0IGlzQ29ubmVjdGVkID0gZmFsc2U7XG5cbmV4cG9ydCBjb25zdCBjb25uZWN0VG9Nb25nb0RCID0gYXN5bmMgKCkgPT4ge1xuICBjb25zb2xlLmxvZygnQ29ubmVjdGluZyB0byBtb25nb0RCLi4uJyk7XG5cbiAgaWYgKGlzQ29ubmVjdGVkKSB7XG4gICAgY29uc29sZS5sb2coJ0FscmVhZHkgY29ubmVjdGVkIHRvIG1vbmdvREInKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBjb25zdCBNT05HT0RCX1VSSSA9IHByb2Nlc3MuZW52Lk1PTkdPREJfVVJJO1xuXG4gIGlmICghTU9OR09EQl9VUkkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAnTU9OR09EQl9VUkkgaXMgbm90IGRlZmluZWQgaW4gLmVudi5sb2NhbCBmaWxlIG9yIGVudmlyb25tZW50IHZhcmlhYmxlcydcbiAgICApO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBhd2FpdCBtb25nb29zZS5jb25uZWN0KE1PTkdPREJfVVJJKTtcbiAgICBpc0Nvbm5lY3RlZCA9IHRydWU7XG4gICAgY29uc29sZS5sb2coJ0Nvbm5lY3RlZCB0byBtb25nb0RCJyk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGNvbm5lY3QgdG8gbW9uZ29EQicsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IG1vbmdvQ29ubmVjdGlvbiA9IG1vbmdvb3NlLmNvbm5lY3Rpb247XG4iXSwibmFtZXMiOlsibW9uZ29vc2UiLCJpc0Nvbm5lY3RlZCIsImNvbm5lY3RUb01vbmdvREIiLCJjb25zb2xlIiwibG9nIiwiTU9OR09EQl9VUkkiLCJwcm9jZXNzIiwiZW52IiwiRXJyb3IiLCJjb25uZWN0IiwiZXJyb3IiLCJtb25nb0Nvbm5lY3Rpb24iLCJjb25uZWN0aW9uIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/db/mongodb.ts\n");

/***/ }),

/***/ "(rsc)/./src/middleware/api/middleware.ts":
/*!******************************************!*\
  !*** ./src/middleware/api/middleware.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ERROR_MESSAGES: () => (/* binding */ ERROR_MESSAGES),\n/* harmony export */   STATUS_CODES: () => (/* binding */ STATUS_CODES),\n/* harmony export */   checkCurrentUser: () => (/* binding */ checkCurrentUser),\n/* harmony export */   createResponse: () => (/* binding */ createResponse),\n/* harmony export */   handleError: () => (/* binding */ handleError),\n/* harmony export */   verifyAdmin: () => (/* binding */ verifyAdmin),\n/* harmony export */   verifyUser: () => (/* binding */ verifyUser)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _middleware_auth_middleware__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/middleware/auth/middleware */ \"(rsc)/./src/middleware/auth/middleware.ts\");\n\n\n// Constants for status codes and error messages\nconst STATUS_CODES = {\n    OK: 200,\n    CREATED: 201,\n    BAD_REQUEST: 400,\n    UNAUTHOURIZED: 401,\n    FORBIDDEN: 403,\n    NOT_FOUND: 404,\n    CONFLICT: 409,\n    SERVER_ERROR: 500\n};\nconst ERROR_MESSAGES = {\n    //user\n    USER_EXISTS: 'A user with this email already exists',\n    USERNAME_EXISTS: 'A user with this username already exists',\n    USER_NOT_FOUND: 'User not found',\n    USER_FETCHING: 'Error fetching user',\n    UNAUTHORIZED_USER: 'Unauthorized user',\n    //friend request\n    FRIEND_REQUEST_EXISTS: 'Friend request already exists',\n    FRIEND_REQUEST_NOT_FOUND: 'Friend request not found',\n    FRIEND_REQUEST_FETCHING: 'Error fetching friend request',\n    //friend\n    FRIEND_EXISTS: 'A user with this email already exists',\n    FRIEND_NOT_FOUND: 'User not found',\n    FRIEND_FETCHING: 'Error fetching user',\n    SERVER_ERROR: 'Internal server error',\n    JWT_NOT_DEFINED: 'JWT_SECRET is not defined',\n    JWT_INVALID: 'Invalid token',\n    JWT_TOKEN_REQUIRE: 'Token is required'\n};\n// Utility function for generating JSON responses\nfunction createResponse(data, status) {\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(data, {\n        status\n    });\n}\n// Utility function for error handling\nfunction handleError(error) {\n    return createResponse({\n        error: {\n            message: ERROR_MESSAGES.SERVER_ERROR,\n            details: error instanceof Error ? error.message : String(error)\n        }\n    }, STATUS_CODES.SERVER_ERROR);\n}\nasync function verifyUser(request) {\n    const verifedUser = await (0,_middleware_auth_middleware__WEBPACK_IMPORTED_MODULE_1__.verifyToken)(request);\n    if (!verifedUser) throw new Error(ERROR_MESSAGES.UNAUTHORIZED_USER);\n    return verifedUser.user;\n}\nasync function verifyAdmin(request) {\n    const user = await (0,_middleware_auth_middleware__WEBPACK_IMPORTED_MODULE_1__.verifyAdminRole)(request);\n    if (!user) throw new Error('Admin role required');\n    return user.user;\n}\nfunction checkCurrentUser(userId, requestId) {\n    if (userId !== requestId) {\n        throw new Error('You cannot do that little rat');\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbWlkZGxld2FyZS9hcGkvbWlkZGxld2FyZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBMkM7QUFDaUM7QUFHNUUsZ0RBQWdEO0FBQ3pDLE1BQU1HLGVBQWU7SUFDMUJDLElBQUk7SUFDSkMsU0FBUztJQUNUQyxhQUFhO0lBQ2JDLGVBQWU7SUFDZkMsV0FBVztJQUNYQyxXQUFXO0lBQ1hDLFVBQVU7SUFDVkMsY0FBYztBQUNoQixFQUFFO0FBRUssTUFBTUMsaUJBQWlCO0lBQzVCLE1BQU07SUFDTkMsYUFBYTtJQUNiQyxpQkFBaUI7SUFDakJDLGdCQUFnQjtJQUNoQkMsZUFBZTtJQUNmQyxtQkFBbUI7SUFFbkIsZ0JBQWdCO0lBQ2hCQyx1QkFBdUI7SUFDdkJDLDBCQUEwQjtJQUMxQkMseUJBQXlCO0lBRXpCLFFBQVE7SUFDUkMsZUFBZTtJQUNmQyxrQkFBa0I7SUFDbEJDLGlCQUFpQjtJQUVqQlosY0FBYztJQUNkYSxpQkFBaUI7SUFDakJDLGFBQWE7SUFDYkMsbUJBQW1CO0FBQ3JCLEVBQUU7QUFFRixpREFBaUQ7QUFDMUMsU0FBU0MsZUFBZUMsSUFBcUIsRUFBRUMsTUFBYztJQUNsRSxPQUFPN0IscURBQVlBLENBQUM4QixJQUFJLENBQUNGLE1BQU07UUFBRUM7SUFBTztBQUMxQztBQUVBLHNDQUFzQztBQUMvQixTQUFTRSxZQUFZQyxLQUFzQjtJQUNoRCxPQUFPTCxlQUNMO1FBQ0VLLE9BQU87WUFDTEMsU0FBU3JCLGVBQWVELFlBQVk7WUFDcEN1QixTQUFTRixpQkFBaUJHLFFBQVFILE1BQU1DLE9BQU8sR0FBR0csT0FBT0o7UUFDM0Q7SUFDRixHQUNBN0IsYUFBYVEsWUFBWTtBQUU3QjtBQUVPLGVBQWUwQixXQUFXQyxPQUFnQjtJQUMvQyxNQUFNQyxjQUFjLE1BQU10Qyx3RUFBV0EsQ0FBQ3FDO0lBQ3RDLElBQUksQ0FBQ0MsYUFBYSxNQUFNLElBQUlKLE1BQU12QixlQUFlSyxpQkFBaUI7SUFDbEUsT0FBT3NCLFlBQVlDLElBQUk7QUFDekI7QUFFTyxlQUFlQyxZQUFZSCxPQUFnQjtJQUNoRCxNQUFNRSxPQUFPLE1BQU10Qyw0RUFBZUEsQ0FBQ29DO0lBQ25DLElBQUksQ0FBQ0UsTUFBTSxNQUFNLElBQUlMLE1BQU07SUFDM0IsT0FBT0ssS0FBS0EsSUFBSTtBQUNsQjtBQUVPLFNBQVNFLGlCQUFpQkMsTUFBYyxFQUFFQyxTQUFpQjtJQUNoRSxJQUFJRCxXQUFXQyxXQUFXO1FBQ3hCLE1BQU0sSUFBSVQsTUFBTTtJQUNsQjtBQUNGIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGNpZ3JpXFxPbmVEcml2ZVxc0KDQsNCx0L7Rh9C40Lkg0YHRgtC+0LtcXFByb2plY3RzXFxjaGF0LXdlYi1zaXRlXFxzcmNcXG1pZGRsZXdhcmVcXGFwaVxcbWlkZGxld2FyZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XHJcbmltcG9ydCB7IHZlcmlmeVRva2VuLCB2ZXJpZnlBZG1pblJvbGUgfSBmcm9tICdAL21pZGRsZXdhcmUvYXV0aC9taWRkbGV3YXJlJztcclxuaW1wb3J0IHsgQXV0aFVzZXIgfSBmcm9tICdAL3V0aWxzL2NvbnN0YW50cyc7XHJcblxyXG4vLyBDb25zdGFudHMgZm9yIHN0YXR1cyBjb2RlcyBhbmQgZXJyb3IgbWVzc2FnZXNcclxuZXhwb3J0IGNvbnN0IFNUQVRVU19DT0RFUyA9IHtcclxuICBPSzogMjAwLFxyXG4gIENSRUFURUQ6IDIwMSxcclxuICBCQURfUkVRVUVTVDogNDAwLFxyXG4gIFVOQVVUSE9VUklaRUQ6IDQwMSxcclxuICBGT1JCSURERU46IDQwMyxcclxuICBOT1RfRk9VTkQ6IDQwNCxcclxuICBDT05GTElDVDogNDA5LFxyXG4gIFNFUlZFUl9FUlJPUjogNTAwLFxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IEVSUk9SX01FU1NBR0VTID0ge1xyXG4gIC8vdXNlclxyXG4gIFVTRVJfRVhJU1RTOiAnQSB1c2VyIHdpdGggdGhpcyBlbWFpbCBhbHJlYWR5IGV4aXN0cycsXHJcbiAgVVNFUk5BTUVfRVhJU1RTOiAnQSB1c2VyIHdpdGggdGhpcyB1c2VybmFtZSBhbHJlYWR5IGV4aXN0cycsXHJcbiAgVVNFUl9OT1RfRk9VTkQ6ICdVc2VyIG5vdCBmb3VuZCcsXHJcbiAgVVNFUl9GRVRDSElORzogJ0Vycm9yIGZldGNoaW5nIHVzZXInLFxyXG4gIFVOQVVUSE9SSVpFRF9VU0VSOiAnVW5hdXRob3JpemVkIHVzZXInLFxyXG5cclxuICAvL2ZyaWVuZCByZXF1ZXN0XHJcbiAgRlJJRU5EX1JFUVVFU1RfRVhJU1RTOiAnRnJpZW5kIHJlcXVlc3QgYWxyZWFkeSBleGlzdHMnLFxyXG4gIEZSSUVORF9SRVFVRVNUX05PVF9GT1VORDogJ0ZyaWVuZCByZXF1ZXN0IG5vdCBmb3VuZCcsXHJcbiAgRlJJRU5EX1JFUVVFU1RfRkVUQ0hJTkc6ICdFcnJvciBmZXRjaGluZyBmcmllbmQgcmVxdWVzdCcsXHJcblxyXG4gIC8vZnJpZW5kXHJcbiAgRlJJRU5EX0VYSVNUUzogJ0EgdXNlciB3aXRoIHRoaXMgZW1haWwgYWxyZWFkeSBleGlzdHMnLFxyXG4gIEZSSUVORF9OT1RfRk9VTkQ6ICdVc2VyIG5vdCBmb3VuZCcsXHJcbiAgRlJJRU5EX0ZFVENISU5HOiAnRXJyb3IgZmV0Y2hpbmcgdXNlcicsXHJcblxyXG4gIFNFUlZFUl9FUlJPUjogJ0ludGVybmFsIHNlcnZlciBlcnJvcicsXHJcbiAgSldUX05PVF9ERUZJTkVEOiAnSldUX1NFQ1JFVCBpcyBub3QgZGVmaW5lZCcsXHJcbiAgSldUX0lOVkFMSUQ6ICdJbnZhbGlkIHRva2VuJyxcclxuICBKV1RfVE9LRU5fUkVRVUlSRTogJ1Rva2VuIGlzIHJlcXVpcmVkJyxcclxufTtcclxuXHJcbi8vIFV0aWxpdHkgZnVuY3Rpb24gZm9yIGdlbmVyYXRpbmcgSlNPTiByZXNwb25zZXNcclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVJlc3BvbnNlKGRhdGE6IEVycm9yIHwgdW5rbm93biwgc3RhdHVzOiBudW1iZXIpIHtcclxuICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oZGF0YSwgeyBzdGF0dXMgfSk7XHJcbn1cclxuXHJcbi8vIFV0aWxpdHkgZnVuY3Rpb24gZm9yIGVycm9yIGhhbmRsaW5nXHJcbmV4cG9ydCBmdW5jdGlvbiBoYW5kbGVFcnJvcihlcnJvcjogRXJyb3IgfCB1bmtub3duKSB7XHJcbiAgcmV0dXJuIGNyZWF0ZVJlc3BvbnNlKFxyXG4gICAge1xyXG4gICAgICBlcnJvcjoge1xyXG4gICAgICAgIG1lc3NhZ2U6IEVSUk9SX01FU1NBR0VTLlNFUlZFUl9FUlJPUixcclxuICAgICAgICBkZXRhaWxzOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvciksXHJcbiAgICAgIH0sXHJcbiAgICB9LFxyXG4gICAgU1RBVFVTX0NPREVTLlNFUlZFUl9FUlJPUlxyXG4gICk7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB2ZXJpZnlVc2VyKHJlcXVlc3Q6IFJlcXVlc3QpOiBQcm9taXNlPEF1dGhVc2VyPiB7XHJcbiAgY29uc3QgdmVyaWZlZFVzZXIgPSBhd2FpdCB2ZXJpZnlUb2tlbihyZXF1ZXN0KTtcclxuICBpZiAoIXZlcmlmZWRVc2VyKSB0aHJvdyBuZXcgRXJyb3IoRVJST1JfTUVTU0FHRVMuVU5BVVRIT1JJWkVEX1VTRVIpO1xyXG4gIHJldHVybiB2ZXJpZmVkVXNlci51c2VyO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdmVyaWZ5QWRtaW4ocmVxdWVzdDogUmVxdWVzdCk6IFByb21pc2U8QXV0aFVzZXI+IHtcclxuICBjb25zdCB1c2VyID0gYXdhaXQgdmVyaWZ5QWRtaW5Sb2xlKHJlcXVlc3QpO1xyXG4gIGlmICghdXNlcikgdGhyb3cgbmV3IEVycm9yKCdBZG1pbiByb2xlIHJlcXVpcmVkJyk7XHJcbiAgcmV0dXJuIHVzZXIudXNlcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNoZWNrQ3VycmVudFVzZXIodXNlcklkOiBzdHJpbmcsIHJlcXVlc3RJZDogc3RyaW5nKSB7XHJcbiAgaWYgKHVzZXJJZCAhPT0gcmVxdWVzdElkKSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1lvdSBjYW5ub3QgZG8gdGhhdCBsaXR0bGUgcmF0Jyk7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJ2ZXJpZnlUb2tlbiIsInZlcmlmeUFkbWluUm9sZSIsIlNUQVRVU19DT0RFUyIsIk9LIiwiQ1JFQVRFRCIsIkJBRF9SRVFVRVNUIiwiVU5BVVRIT1VSSVpFRCIsIkZPUkJJRERFTiIsIk5PVF9GT1VORCIsIkNPTkZMSUNUIiwiU0VSVkVSX0VSUk9SIiwiRVJST1JfTUVTU0FHRVMiLCJVU0VSX0VYSVNUUyIsIlVTRVJOQU1FX0VYSVNUUyIsIlVTRVJfTk9UX0ZPVU5EIiwiVVNFUl9GRVRDSElORyIsIlVOQVVUSE9SSVpFRF9VU0VSIiwiRlJJRU5EX1JFUVVFU1RfRVhJU1RTIiwiRlJJRU5EX1JFUVVFU1RfTk9UX0ZPVU5EIiwiRlJJRU5EX1JFUVVFU1RfRkVUQ0hJTkciLCJGUklFTkRfRVhJU1RTIiwiRlJJRU5EX05PVF9GT1VORCIsIkZSSUVORF9GRVRDSElORyIsIkpXVF9OT1RfREVGSU5FRCIsIkpXVF9JTlZBTElEIiwiSldUX1RPS0VOX1JFUVVJUkUiLCJjcmVhdGVSZXNwb25zZSIsImRhdGEiLCJzdGF0dXMiLCJqc29uIiwiaGFuZGxlRXJyb3IiLCJlcnJvciIsIm1lc3NhZ2UiLCJkZXRhaWxzIiwiRXJyb3IiLCJTdHJpbmciLCJ2ZXJpZnlVc2VyIiwicmVxdWVzdCIsInZlcmlmZWRVc2VyIiwidXNlciIsInZlcmlmeUFkbWluIiwiY2hlY2tDdXJyZW50VXNlciIsInVzZXJJZCIsInJlcXVlc3RJZCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/middleware/api/middleware.ts\n");

/***/ }),

/***/ "(rsc)/./src/middleware/auth/middleware.ts":
/*!*******************************************!*\
  !*** ./src/middleware/auth/middleware.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   generateToken: () => (/* binding */ generateToken),\n/* harmony export */   verifyAdminRole: () => (/* binding */ verifyAdminRole),\n/* harmony export */   verifyToken: () => (/* binding */ verifyToken)\n/* harmony export */ });\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jsonwebtoken */ \"(rsc)/./node_modules/jsonwebtoken/index.js\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__);\n\nasync function verifyToken(request) {\n    const authHeader = request.headers.get('Authorization');\n    if (!authHeader) {\n        throw new Error('Authorization header missing');\n    }\n    const token = authHeader.split(' ')[1];\n    if (!token) {\n        throw new Error('Token missing');\n    }\n    const jwtSecret = process.env.JWT_SECRET;\n    if (!jwtSecret) {\n        throw new Error('JWT_SECRET is not defined');\n    }\n    try {\n        const decoded = jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().verify(token, jwtSecret);\n        return typeof decoded === 'object' ? decoded : null;\n    } catch  {\n        throw new Error('Invalid token');\n    }\n}\nasync function verifyAdminRole(request) {\n    const decoded = await verifyToken(request);\n    await console.log(decoded);\n    if (!decoded || decoded.user.role !== 'admin') {\n        return null;\n    }\n    return decoded;\n}\nfunction generateToken(user) {\n    const jwtSecret = process.env.JWT_SECRET;\n    if (!jwtSecret) {\n        throw new Error('JWT_SECRET is not defined');\n    }\n    const token = jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().sign({\n        user: user\n    }, jwtSecret, {\n        expiresIn: '24h'\n    } // valid for 24 hours\n    );\n    return token;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbWlkZGxld2FyZS9hdXRoL21pZGRsZXdhcmUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBK0M7QUFHeEMsZUFBZUMsWUFDcEJDLE9BQWdCO0lBRWhCLE1BQU1DLGFBQWFELFFBQVFFLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDO0lBQ3ZDLElBQUksQ0FBQ0YsWUFBWTtRQUNmLE1BQU0sSUFBSUcsTUFBTTtJQUNsQjtJQUVBLE1BQU1DLFFBQVFKLFdBQVdLLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRTtJQUN0QyxJQUFJLENBQUNELE9BQU87UUFDVixNQUFNLElBQUlELE1BQU07SUFDbEI7SUFFQSxNQUFNRyxZQUFZQyxRQUFRQyxHQUFHLENBQUNDLFVBQVU7SUFDeEMsSUFBSSxDQUFDSCxXQUFXO1FBQ2QsTUFBTSxJQUFJSCxNQUFNO0lBQ2xCO0lBRUEsSUFBSTtRQUNGLE1BQU1PLFVBQVViLDBEQUFVLENBQUNPLE9BQU9FO1FBQ2xDLE9BQU8sT0FBT0ksWUFBWSxXQUFXQSxVQUFVO0lBQ2pELEVBQUUsT0FBTTtRQUNOLE1BQU0sSUFBSVAsTUFBTTtJQUNsQjtBQUNGO0FBRU8sZUFBZVMsZ0JBQWdCYixPQUFnQjtJQUNwRCxNQUFNVyxVQUFVLE1BQU1aLFlBQVlDO0lBQ2xDLE1BQU1jLFFBQVFDLEdBQUcsQ0FBQ0o7SUFDbEIsSUFBSSxDQUFDQSxXQUFXQSxRQUFRSyxJQUFJLENBQUNDLElBQUksS0FBSyxTQUFTO1FBQzdDLE9BQU87SUFDVDtJQUVBLE9BQU9OO0FBQ1Q7QUFFTyxTQUFTTyxjQUFjRixJQUFjO0lBQzFDLE1BQU1ULFlBQVlDLFFBQVFDLEdBQUcsQ0FBQ0MsVUFBVTtJQUN4QyxJQUFJLENBQUNILFdBQVc7UUFDZCxNQUFNLElBQUlILE1BQU07SUFDbEI7SUFFQSxNQUFNQyxRQUFRUCx3REFBUSxDQUNwQjtRQUFFa0IsTUFBTUE7SUFBSyxHQUNiVCxXQUNBO1FBQUVhLFdBQVc7SUFBTSxFQUFFLHFCQUFxQjs7SUFHNUMsT0FBT2Y7QUFDVCIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxjaWdyaVxcT25lRHJpdmVcXNCg0LDQsdC+0YfQuNC5INGB0YLQvtC7XFxQcm9qZWN0c1xcY2hhdC13ZWItc2l0ZVxcc3JjXFxtaWRkbGV3YXJlXFxhdXRoXFxtaWRkbGV3YXJlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBqd3QsIHsgSnd0UGF5bG9hZCB9IGZyb20gJ2pzb253ZWJ0b2tlbic7XHJcbmltcG9ydCB7IEF1dGhVc2VyIH0gZnJvbSAnQC91dGlscy9jb25zdGFudHMnO1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHZlcmlmeVRva2VuKFxyXG4gIHJlcXVlc3Q6IFJlcXVlc3RcclxuKTogUHJvbWlzZTxKd3RQYXlsb2FkIHwgbnVsbD4ge1xyXG4gIGNvbnN0IGF1dGhIZWFkZXIgPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KCdBdXRob3JpemF0aW9uJyk7XHJcbiAgaWYgKCFhdXRoSGVhZGVyKSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0F1dGhvcml6YXRpb24gaGVhZGVyIG1pc3NpbmcnKTtcclxuICB9XHJcblxyXG4gIGNvbnN0IHRva2VuID0gYXV0aEhlYWRlci5zcGxpdCgnICcpWzFdO1xyXG4gIGlmICghdG9rZW4pIHtcclxuICAgIHRocm93IG5ldyBFcnJvcignVG9rZW4gbWlzc2luZycpO1xyXG4gIH1cclxuXHJcbiAgY29uc3Qgand0U2VjcmV0ID0gcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVDtcclxuICBpZiAoIWp3dFNlY3JldCkge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKCdKV1RfU0VDUkVUIGlzIG5vdCBkZWZpbmVkJyk7XHJcbiAgfVxyXG5cclxuICB0cnkge1xyXG4gICAgY29uc3QgZGVjb2RlZCA9IGp3dC52ZXJpZnkodG9rZW4sIGp3dFNlY3JldCk7XHJcbiAgICByZXR1cm4gdHlwZW9mIGRlY29kZWQgPT09ICdvYmplY3QnID8gZGVjb2RlZCA6IG51bGw7XHJcbiAgfSBjYXRjaCB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgdG9rZW4nKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB2ZXJpZnlBZG1pblJvbGUocmVxdWVzdDogUmVxdWVzdCkge1xyXG4gIGNvbnN0IGRlY29kZWQgPSBhd2FpdCB2ZXJpZnlUb2tlbihyZXF1ZXN0KTtcclxuICBhd2FpdCBjb25zb2xlLmxvZyhkZWNvZGVkKTtcclxuICBpZiAoIWRlY29kZWQgfHwgZGVjb2RlZC51c2VyLnJvbGUgIT09ICdhZG1pbicpIHtcclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGRlY29kZWQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZVRva2VuKHVzZXI6IEF1dGhVc2VyKTogc3RyaW5nIHtcclxuICBjb25zdCBqd3RTZWNyZXQgPSBwcm9jZXNzLmVudi5KV1RfU0VDUkVUO1xyXG4gIGlmICghand0U2VjcmV0KSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0pXVF9TRUNSRVQgaXMgbm90IGRlZmluZWQnKTtcclxuICB9XHJcblxyXG4gIGNvbnN0IHRva2VuID0gand0LnNpZ24oXHJcbiAgICB7IHVzZXI6IHVzZXIgfSxcclxuICAgIGp3dFNlY3JldCxcclxuICAgIHsgZXhwaXJlc0luOiAnMjRoJyB9IC8vIHZhbGlkIGZvciAyNCBob3Vyc1xyXG4gICk7XHJcblxyXG4gIHJldHVybiB0b2tlbjtcclxufVxyXG4iXSwibmFtZXMiOlsiand0IiwidmVyaWZ5VG9rZW4iLCJyZXF1ZXN0IiwiYXV0aEhlYWRlciIsImhlYWRlcnMiLCJnZXQiLCJFcnJvciIsInRva2VuIiwic3BsaXQiLCJqd3RTZWNyZXQiLCJwcm9jZXNzIiwiZW52IiwiSldUX1NFQ1JFVCIsImRlY29kZWQiLCJ2ZXJpZnkiLCJ2ZXJpZnlBZG1pblJvbGUiLCJjb25zb2xlIiwibG9nIiwidXNlciIsInJvbGUiLCJnZW5lcmF0ZVRva2VuIiwic2lnbiIsImV4cGlyZXNJbiJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/middleware/auth/middleware.ts\n");

/***/ }),

/***/ "(rsc)/./src/models/Chat.ts":
/*!****************************!*\
  !*** ./src/models/Chat.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst FriendChatSchema = new (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema)({\n    participants: {\n        type: [\n            {\n                type: (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema).Types.ObjectId,\n                ref: 'User',\n                required: true\n            }\n        ],\n        validate: {\n            validator: function(value) {\n                return value.length === 2; // Гарантируем, что ровно 2 участника\n            },\n            message: 'Чат должен содержать ровно двух участников.'\n        }\n    },\n    messages: [\n        {\n            type: (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema).Types.ObjectId,\n            ref: 'Message'\n        }\n    ]\n}, {\n    timestamps: true\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).FriendChat || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model('FriendChat', FriendChatSchema));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbW9kZWxzL0NoYXQudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQWdDO0FBRWhDLE1BQU1DLG1CQUFtQixJQUFJRCx3REFBZSxDQUMxQztJQUNFRyxjQUFjO1FBQ1pDLE1BQU07WUFDSjtnQkFDRUEsTUFBTUosd0RBQWUsQ0FBQ0ssS0FBSyxDQUFDQyxRQUFRO2dCQUNwQ0MsS0FBSztnQkFDTEMsVUFBVTtZQUNaO1NBQ0Q7UUFDREMsVUFBVTtZQUNSQyxXQUFXLFNBQVVDLEtBQWdDO2dCQUNuRCxPQUFPQSxNQUFNQyxNQUFNLEtBQUssR0FBRyxxQ0FBcUM7WUFDbEU7WUFDQUMsU0FBUztRQUNYO0lBQ0Y7SUFDQUMsVUFBVTtRQUNSO1lBQ0VWLE1BQU1KLHdEQUFlLENBQUNLLEtBQUssQ0FBQ0MsUUFBUTtZQUNwQ0MsS0FBSztRQUNQO0tBQ0Q7QUFDSCxHQUNBO0lBQUVRLFlBQVk7QUFBSztBQUdyQixpRUFBZWYsd0RBQWUsQ0FBQ2lCLFVBQVUsSUFDdkNqQixxREFBYyxDQUFDLGNBQWNDLGlCQUFpQkEsRUFBQyIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxjaWdyaVxcT25lRHJpdmVcXNCg0LDQsdC+0YfQuNC5INGB0YLQvtC7XFxQcm9qZWN0c1xcY2hhdC13ZWItc2l0ZVxcc3JjXFxtb2RlbHNcXENoYXQudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJztcclxuXHJcbmNvbnN0IEZyaWVuZENoYXRTY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKFxyXG4gIHtcclxuICAgIHBhcnRpY2lwYW50czoge1xyXG4gICAgICB0eXBlOiBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgdHlwZTogbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk9iamVjdElkLFxyXG4gICAgICAgICAgcmVmOiAnVXNlcicsXHJcbiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcclxuICAgICAgICB9LFxyXG4gICAgICBdLFxyXG4gICAgICB2YWxpZGF0ZToge1xyXG4gICAgICAgIHZhbGlkYXRvcjogZnVuY3Rpb24gKHZhbHVlOiBtb25nb29zZS5UeXBlcy5PYmplY3RJZFtdKSB7XHJcbiAgICAgICAgICByZXR1cm4gdmFsdWUubGVuZ3RoID09PSAyOyAvLyDQk9Cw0YDQsNC90YLQuNGA0YPQtdC8LCDRh9GC0L4g0YDQvtCy0L3QviAyINGD0YfQsNGB0YLQvdC40LrQsFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbWVzc2FnZTogJ9Cn0LDRgiDQtNC+0LvQttC10L0g0YHQvtC00LXRgNC20LDRgtGMINGA0L7QstC90L4g0LTQstGD0YUg0YPRh9Cw0YHRgtC90LjQutC+0LIuJyxcclxuICAgICAgfSxcclxuICAgIH0sIC8vINCj0YfQsNGB0YLQvdC40LrQuCDRh9Cw0YLQsCAo0YHRgtGA0L7Qs9C+INC00LLQsCDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y8pXHJcbiAgICBtZXNzYWdlczogW1xyXG4gICAgICB7XHJcbiAgICAgICAgdHlwZTogbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk9iamVjdElkLFxyXG4gICAgICAgIHJlZjogJ01lc3NhZ2UnLFxyXG4gICAgICB9LFxyXG4gICAgXSwgLy8g0KHQvtC+0LHRidC10L3QuNGPINCyINGH0LDRgtC1XHJcbiAgfSxcclxuICB7IHRpbWVzdGFtcHM6IHRydWUgfVxyXG4pO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgbW9uZ29vc2UubW9kZWxzLkZyaWVuZENoYXQgfHxcclxuICBtb25nb29zZS5tb2RlbCgnRnJpZW5kQ2hhdCcsIEZyaWVuZENoYXRTY2hlbWEpO1xyXG4iXSwibmFtZXMiOlsibW9uZ29vc2UiLCJGcmllbmRDaGF0U2NoZW1hIiwiU2NoZW1hIiwicGFydGljaXBhbnRzIiwidHlwZSIsIlR5cGVzIiwiT2JqZWN0SWQiLCJyZWYiLCJyZXF1aXJlZCIsInZhbGlkYXRlIiwidmFsaWRhdG9yIiwidmFsdWUiLCJsZW5ndGgiLCJtZXNzYWdlIiwibWVzc2FnZXMiLCJ0aW1lc3RhbXBzIiwibW9kZWxzIiwiRnJpZW5kQ2hhdCIsIm1vZGVsIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/models/Chat.ts\n");

/***/ }),

/***/ "(rsc)/./src/models/Message.ts":
/*!*******************************!*\
  !*** ./src/models/Message.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst MessageSchema = new (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema)({\n    chat: {\n        type: (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema).Types.ObjectId,\n        ref: 'TextChat',\n        required: true\n    },\n    sender: {\n        type: (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema).Types.ObjectId,\n        ref: 'User',\n        required: true\n    },\n    content: {\n        type: String,\n        required: true\n    },\n    timestamp: {\n        type: Date,\n        default: Date.now\n    }\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).Message || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model('Message', MessageSchema));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbW9kZWxzL01lc3NhZ2UudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQWdDO0FBRWhDLE1BQU1DLGdCQUFnQixJQUFJRCx3REFBZSxDQUFDO0lBQ3hDRyxNQUFNO1FBQ0pDLE1BQU1KLHdEQUFlLENBQUNLLEtBQUssQ0FBQ0MsUUFBUTtRQUNwQ0MsS0FBSztRQUNMQyxVQUFVO0lBQ1o7SUFDQUMsUUFBUTtRQUFFTCxNQUFNSix3REFBZSxDQUFDSyxLQUFLLENBQUNDLFFBQVE7UUFBRUMsS0FBSztRQUFRQyxVQUFVO0lBQUs7SUFDNUVFLFNBQVM7UUFBRU4sTUFBTU87UUFBUUgsVUFBVTtJQUFLO0lBQ3hDSSxXQUFXO1FBQUVSLE1BQU1TO1FBQU1DLFNBQVNELEtBQUtFLEdBQUc7SUFBQztBQUM3QztBQUVBLGlFQUFlZix3REFBZSxDQUFDaUIsT0FBTyxJQUNwQ2pCLHFEQUFjLENBQUMsV0FBV0MsY0FBY0EsRUFBQyIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxjaWdyaVxcT25lRHJpdmVcXNCg0LDQsdC+0YfQuNC5INGB0YLQvtC7XFxQcm9qZWN0c1xcY2hhdC13ZWItc2l0ZVxcc3JjXFxtb2RlbHNcXE1lc3NhZ2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJztcblxuY29uc3QgTWVzc2FnZVNjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoe1xuICBjaGF0OiB7XG4gICAgdHlwZTogbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk9iamVjdElkLFxuICAgIHJlZjogJ1RleHRDaGF0JyxcbiAgICByZXF1aXJlZDogdHJ1ZSxcbiAgfSxcbiAgc2VuZGVyOiB7IHR5cGU6IG1vbmdvb3NlLlNjaGVtYS5UeXBlcy5PYmplY3RJZCwgcmVmOiAnVXNlcicsIHJlcXVpcmVkOiB0cnVlIH0sXG4gIGNvbnRlbnQ6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSB9LFxuICB0aW1lc3RhbXA6IHsgdHlwZTogRGF0ZSwgZGVmYXVsdDogRGF0ZS5ub3cgfSxcbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBtb25nb29zZS5tb2RlbHMuTWVzc2FnZSB8fFxuICBtb25nb29zZS5tb2RlbCgnTWVzc2FnZScsIE1lc3NhZ2VTY2hlbWEpO1xuIl0sIm5hbWVzIjpbIm1vbmdvb3NlIiwiTWVzc2FnZVNjaGVtYSIsIlNjaGVtYSIsImNoYXQiLCJ0eXBlIiwiVHlwZXMiLCJPYmplY3RJZCIsInJlZiIsInJlcXVpcmVkIiwic2VuZGVyIiwiY29udGVudCIsIlN0cmluZyIsInRpbWVzdGFtcCIsIkRhdGUiLCJkZWZhdWx0Iiwibm93IiwibW9kZWxzIiwiTWVzc2FnZSIsIm1vZGVsIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/models/Message.ts\n");

/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "mongoose":
/*!***************************!*\
  !*** external "mongoose" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("mongoose");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/ms","vendor-chunks/semver","vendor-chunks/jsonwebtoken","vendor-chunks/lodash.includes","vendor-chunks/jws","vendor-chunks/lodash.once","vendor-chunks/jwa","vendor-chunks/lodash.isinteger","vendor-chunks/ecdsa-sig-formatter","vendor-chunks/lodash.isplainobject","vendor-chunks/lodash.isstring","vendor-chunks/lodash.isnumber","vendor-chunks/lodash.isboolean","vendor-chunks/safe-buffer","vendor-chunks/buffer-equal-constant-time"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fmessage%2F%5Bid%5D%2Froute&page=%2Fapi%2Fmessage%2F%5Bid%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmessage%2F%5Bid%5D%2Froute.ts&appDir=C%3A%5CUsers%5Ccigri%5COneDrive%5C%D0%A0%D0%B0%D0%B1%D0%BE%D1%87%D0%B8%D0%B9%20%D1%81%D1%82%D0%BE%D0%BB%5CProjects%5Cchat-web-site%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Ccigri%5COneDrive%5C%D0%A0%D0%B0%D0%B1%D0%BE%D1%87%D0%B8%D0%B9%20%D1%81%D1%82%D0%BE%D0%BB%5CProjects%5Cchat-web-site&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();